@model WirtualnaUczelnia.Models.Location

@{
    ViewData["Title"] = "Usuñ lokacjê";
    var relatedTransitions = ViewBag.RelatedTransitions as List<WirtualnaUczelnia.Models.Transition>;
    var hasRelatedTransitions = ViewBag.HasRelatedTransitions ?? false;
}

<h1>Usuñ lokacjê</h1>

@if (hasRelatedTransitions)
{
    <div class="alert alert-warning" role="alert">
        <h4 class="alert-heading">?? Uwaga!</h4>
        <p>Ta lokacja jest wykorzystywana w <strong>@relatedTransitions.Count</strong> przejœciach.</p>
        <hr />
        <p class="mb-0">Usuniêcie tej lokacji spowoduje równie¿ usuniêcie nastêpuj¹cych przejœæ:</p>
    </div>

    <div class="card mb-3">
        <div class="card-header">
            Powi¹zane przejœcia do usuniêcia
        </div>
        <ul class="list-group list-group-flush">
            @foreach (var transition in relatedTransitions)
            {
                <li class="list-group-item">
                    <strong>@transition.SourceLocation.Name</strong> ? <strong>@transition.TargetLocation.Name</strong>
                    <span class="badge bg-secondary ms-2">@transition.Direction</span>
                </li>
            }
        </ul>
    </div>
}
else
{
    <div class="alert alert-info" role="alert">
        Ta lokacja nie jest powi¹zana z ¿adnymi przejœciami.
    </div>
}

<h3>Czy na pewno chcesz usun¹æ tê lokacjê?</h3>
<div>
    <h4>Lokacja</h4>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Name)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Name)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Description)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Description)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ImageFileName)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ImageFileName)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.AudioFileName)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.AudioFileName)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Building)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Building.Name)
        </dd>
    </dl>
    
    <form asp-action="Delete">
        <input type="hidden" asp-for="Id" />
        @if (hasRelatedTransitions)
        {
            <button type="submit" class="btn btn-danger" 
                    onclick="return confirm('UWAGA: Usuniêcie tej lokacji spowoduje równie¿ usuniêcie @relatedTransitions.Count powi¹zanych przejœæ. Czy na pewno chcesz kontynuowaæ?');">
                <i class="bi bi-trash"></i> Usuñ lokacjê i @relatedTransitions.Count przejœæ
            </button>
        }
        else
        {
            <button type="submit" class="btn btn-danger">
                <i class="bi bi-trash"></i> Usuñ
            </button>
        }
        <span class="mx-2">|</span>
        <a asp-action="Index" class="btn btn-secondary">Powrót do listy</a>
    </form>
</div>
