@model WirtualnaUczelnia.Models.Location

@{
    ViewData["Title"] = "Szczegó³y lokalizacji";
    
    string typeIcon = Model.Type switch
    {
        WirtualnaUczelnia.Models.LocationType.Room => "??",
        WirtualnaUczelnia.Models.LocationType.Corridor => "???",
        WirtualnaUczelnia.Models.LocationType.Hall => "???",
        WirtualnaUczelnia.Models.LocationType.Stairs => "??",
        WirtualnaUczelnia.Models.LocationType.Elevator => "??",
        WirtualnaUczelnia.Models.LocationType.Entrance => "??",
        _ => "??"
    };
    
    string typeName = Model.Type switch
    {
        WirtualnaUczelnia.Models.LocationType.Room => "Pomieszczenie",
        WirtualnaUczelnia.Models.LocationType.Corridor => "Korytarz",
        WirtualnaUczelnia.Models.LocationType.Hall => "Hol",
        WirtualnaUczelnia.Models.LocationType.Stairs => "Schody",
        WirtualnaUczelnia.Models.LocationType.Elevator => "Winda",
        WirtualnaUczelnia.Models.LocationType.Entrance => "Wejœcie",
        _ => "Inne"
    };
}

<h1 tabindex="0">Szczegó³y lokalizacji</h1>
<hr />

<div class="row">
    <div class="col-md-6">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h2 class="mb-0" tabindex="0">
                    <span aria-hidden="true">@typeIcon</span> @Model.Name
                </h2>
            </div>
            <div class="card-body">
                <!-- Status -->
                <div class="mb-3">
                    @if (Model.IsHidden)
                    {
                        <span class="badge bg-secondary fs-6" tabindex="0">
                            <i class="bi bi-eye-slash" aria-hidden="true"></i> Ukryta
                        </span>
                    }
                    else
                    {
                        <span class="badge bg-success fs-6" tabindex="0">
                            <i class="bi bi-eye" aria-hidden="true"></i> Widoczna
                        </span>
                    }
                </div>

                <dl class="row">
                    <dt class="col-sm-4" tabindex="0">Typ lokalizacji</dt>
                    <dd class="col-sm-8" tabindex="0">@typeIcon @typeName</dd>

                    <dt class="col-sm-4" tabindex="0">Piêtro</dt>
                    <dd class="col-sm-8" tabindex="0">
                        @if (Model.Floor == 0)
                        {
                            <span>Parter</span>
                        }
                        else if (Model.Floor > 0)
                        {
                            <span>@Model.Floor piêtro</span>
                        }
                        else
                        {
                            <span>Piwnica (@Model.Floor)</span>
                        }
                    </dd>

                    <dt class="col-sm-4" tabindex="0">Budynek</dt>
                    <dd class="col-sm-8" tabindex="0">
                        @if (Model.Building != null)
                        {
                            <span class="badge bg-primary">@Model.Building.Symbol</span>
                            @Model.Building.Name
                        }
                        else
                        {
                            <span class="text-muted">Nie przypisano</span>
                        }
                    </dd>

                    <dt class="col-sm-4" tabindex="0">Opis</dt>
                    <dd class="col-sm-8" tabindex="0">
                        @(string.IsNullOrEmpty(Model.Description) ? "Brak opisu" : Model.Description)
                    </dd>
                </dl>
            </div>
        </div>

        <!-- Multimedia -->
        <div class="card shadow mt-3">
            <div class="card-header bg-light">
                <h3 class="mb-0" tabindex="0"><i class="bi bi-collection" aria-hidden="true"></i> Multimedia</h3>
            </div>
            <div class="card-body">
                <!-- Zdjêcie -->
                <div class="mb-3">
                    <strong tabindex="0">Zdjêcie:</strong>
                    @if (!string.IsNullOrEmpty(Model.ImageFileName))
                    {
                        <div class="mt-2">
                            <img src="~/images/@Model.ImageFileName" 
                                 class="img-fluid rounded shadow-sm" 
                                 style="max-height: 200px;"
                                 alt="@(Model.ImageAltText ?? $"Zdjêcie lokalizacji {Model.Name}")"
                                 tabindex="0" />
                            <div><small class="text-muted">Plik: @Model.ImageFileName</small></div>
                        </div>
                    }
                    else
                    {
                        <span class="text-warning" tabindex="0">Brak zdjêcia</span>
                    }
                </div>

                <!-- Tekst alternatywny -->
                <div class="mb-3">
                    <strong tabindex="0">
                        <i class="bi bi-universal-access text-primary" aria-hidden="true"></i> Tekst alternatywny:
                    </strong>
                    <p class="mb-0 @(string.IsNullOrEmpty(Model.ImageAltText) ? "text-warning" : "")" tabindex="0">
                        @(string.IsNullOrEmpty(Model.ImageAltText) ? "?? Brak tekstu alternatywnego!" : Model.ImageAltText)
                    </p>
                </div>

                <!-- Audio -->
                <div class="mb-3">
                    <strong tabindex="0"><i class="bi bi-mic" aria-hidden="true"></i> Lektor (Audio):</strong>
                    @if (!string.IsNullOrEmpty(Model.AudioFileName))
                    {
                        <div class="mt-2">
                            <audio controls class="w-100" aria-label="Nagranie lektora dla lokalizacji @Model.Name">
                                <source src="~/audio/@Model.AudioFileName" type="audio/mpeg">
                                Twoja przegl¹darka nie obs³uguje odtwarzacza audio.
                            </audio>
                            <div><small class="text-muted">Plik: @Model.AudioFileName</small></div>
                        </div>
                    }
                    else
                    {
                        <span class="text-muted" tabindex="0">Brak nagrania</span>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<div class="mt-4 d-flex gap-2">
    <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning">
        <i class="bi bi-pencil" aria-hidden="true"></i> Edytuj
    </a>
    <a asp-action="Index" class="btn btn-secondary">
        <i class="bi bi-arrow-left" aria-hidden="true"></i> Powrót do listy
    </a>
    <a href="/Explore?id=@Model.Id" class="btn btn-primary">
        <i class="bi bi-eye" aria-hidden="true"></i> Podgl¹d w Explore
    </a>
</div>
